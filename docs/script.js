(()=>{"use strict";var r,t={885:(r,t,l)=>{var e=l(540),a=l(338);const C=(r,t)=>new Array(r).fill(t),i=r=>r?"o":"u",n=(r,t)=>{let l;if((r=r.trim()).includes(" "))l=[].concat(...r.split(" ").map((r=>n(r))));else{let t=1,e=!0;try{const[l]=r.match(/\d+/)||[];t=Number(l||1),e=/^o/.test(r)}catch(r){}l=C(t,e)}if(t){for(;l.length<t;)l.push(...l);l=l.slice(0,t)}return l},h=r=>parseInt(r.map((r=>r?1:0)).join(""),2).toString(36),g=(r,t)=>parseInt(r,36).toString(2).padStart(t,"0").split("").map((r=>"0"!=r)),f=(r,t)=>h(n(r,t)),s=(r,t)=>(r=>{const t=r.map(i);t.push("f");let l=t.shift(),e=1;return t.forEach((r=>{l.slice(-1)===r?e+=1:(l+=`${e>1?e:""} ${r}`,e=1)})),l.replace(/ f/g,"")})(g(r,t));function c({rows:r,left:t,right:l,leftBase:e,rightBase:a,pattern:C,...i}){const{leftClr1:n,leftClr2:g,leftClr3:s,leftClr4:c,leftClr5:o,leftClr6:m,leftClr7:u,leftClr8:p,leftClr9:d,leftClr10:v,leftClr11:E,leftClr12:y,leftClr13:b,leftClr14:w,leftClr15:N,leftClr16:x,leftClr17:$,leftClr18:B,leftClr19:O,leftClr20:k,leftClr21:S,leftClr22:j,leftClr23:P,leftClr24:I,leftClr25:R,leftClr26:L,leftClr27:M,leftClr28:V,leftClr29:Y,leftClr30:A,leftClr31:F,leftClr32:H,rightClr1:T,rightClr2:W,rightClr3:q,rightClr4:z,rightClr5:D,rightClr6:G,rightClr7:J,rightClr8:K,rightClr9:Q,rightClr10:U,rightClr11:X,rightClr12:Z,rightClr13:_,rightClr14:rr,rightClr15:tr,rightClr16:lr,rightClr17:er,rightClr18:ar,rightClr19:Cr,rightClr20:ir,rightClr21:nr,rightClr22:hr,rightClr23:gr,rightClr24:fr,rightClr25:sr,rightClr26:cr,rightClr27:or,rightClr28:mr,rightClr29:ur,rightClr30:pr,rightClr31:dr,rightClr32:vr}=i,Er=[n,g,s,c,o,m,u,p,d,v,E,y,b,w,N,x,$,B,O,k,S,j,P,I,R,L,M,V,Y,A,F,H],yr=[T,W,q,z,D,G,J,K,Q,U,X,Z,_,rr,tr,lr,er,ar,Cr,ir,nr,hr,gr,fr,sr,cr,or,mr,ur,pr,dr,vr];return[r,t,l,f(e,t),f(a,l),Er.slice(0,t).join(";"),yr.slice(0,l).join(";"),C.map((r=>r.map(h).join("|"))).join(";")].join(",")}const o="changeInputs",m="initPattern",u="toggleOver",p="replaceState",d={[p]:(r,{payload:t})=>t,[o]:(r,{payload:t})=>{const l={...r,...t};return d[m](l)},[m]:(r,{payload:t}={payload:{}})=>{const l={...r,...t},{left:e,right:a,rows:i,rightBase:h,leftBase:g}=l,f=function(r,t,l,e,a){const[i,h]=[n(e,t),n(a,l)],g=C(r,!1).map((r=>[C(t,!0).map(((r,t)=>i[t%i.length])),C(l,!0).map(((r,t)=>h[t%h.length]))]));return console.warn({left:t,right:l,leftBase:i,rightBase:h,v:g,b:C(t,!0).map(((r,t)=>i[t%i.length]))}),g}(i,e,a,g,h);return{...l,pattern:f}},[u]:(r,{payload:t})=>{const{row:l,side:e,nub:a,over:C}=t;return{...r,pattern:r.pattern.map(((r,t)=>r.map(((r,i)=>r.map(((r,n)=>t===l&&i===e&&n===a?C:r))))))}}},v=()=>y,E=(r,t)=>{const l=d[t.type];return l?(r=>{const{rows:t,leftBase:l,rightBase:e,left:a,right:C}=r;return location.hash=`#${t}/${a}/${C}/${f(l,a)}/${f(e,C)}`,r})(l(r,t)):r},y={rows:32,left:8,right:8,leftClr1:"#333333",leftClr2:"#333333",leftClr3:"#333333",leftClr4:"#333333",leftClr5:"#333333",leftClr6:"#333333",leftClr7:"#333333",leftClr8:"#333333",leftClr9:"#333333",leftClr10:"#333333",leftClr11:"#333333",leftClr12:"#333333",leftClr13:"#333333",leftClr14:"#333333",leftClr15:"#333333",leftClr16:"#333333",leftClr17:"#333333",leftClr18:"#333333",leftClr19:"#333333",leftClr20:"#333333",leftClr21:"#333333",leftClr22:"#333333",leftClr23:"#333333",leftClr24:"#333333",leftClr25:"#333333",leftClr26:"#333333",leftClr27:"#333333",leftClr28:"#333333",leftClr29:"#333333",leftClr30:"#333333",leftClr31:"#333333",leftClr32:"#333333",rightClr1:"#6900d1",rightClr2:"#6900d1",rightClr3:"#6900d1",rightClr4:"#6900d1",rightClr5:"#6900d1",rightClr6:"#6900d1",rightClr7:"#6900d1",rightClr8:"#6900d1",rightClr9:"#6900d1",rightClr10:"#6900d1",rightClr11:"#6900d1",rightClr12:"#6900d1",rightClr13:"#6900d1",rightClr14:"#6900d1",rightClr15:"#6900d1",rightClr16:"#6900d1",rightClr17:"#6900d1",rightClr18:"#6900d1",rightClr19:"#6900d1",rightClr20:"#6900d1",rightClr21:"#6900d1",rightClr22:"#6900d1",rightClr23:"#6900d1",rightClr24:"#6900d1",rightClr25:"#6900d1",rightClr26:"#6900d1",rightClr27:"#6900d1",rightClr28:"#6900d1",rightClr29:"#6900d1",rightClr30:"#6900d1",rightClr31:"#6900d1",rightClr32:"#6900d1",leftBase:"u4 o4",rightBase:"u4 o4",pattern:[[],[]]},b=e.createContext(y),w=b,N=({children:r})=>{const[t,l]=(a=y,(0,e.useReducer)(E,a,v));var a;const C=(0,e.useMemo)((()=>{const{left:r,right:l,leftClr1:e,leftClr2:a,leftClr3:C,leftClr4:i,leftClr5:n,leftClr6:h,leftClr7:g,leftClr8:f,leftClr9:s,leftClr10:c,leftClr11:o,leftClr12:m,leftClr13:u,leftClr14:p,leftClr15:d,leftClr16:v,leftClr17:E,leftClr18:y,leftClr19:b,leftClr20:w,leftClr21:N,leftClr22:x,leftClr23:$,leftClr24:B,leftClr25:O,leftClr26:k,leftClr27:S,leftClr28:j,leftClr29:P,leftClr30:I,leftClr31:R,leftClr32:L,rightClr1:M,rightClr2:V,rightClr3:Y,rightClr4:A,rightClr5:F,rightClr6:H,rightClr7:T,rightClr8:W,rightClr9:q,rightClr10:z,rightClr11:D,rightClr12:G,rightClr13:J,rightClr14:K,rightClr15:Q,rightClr16:U,rightClr17:X,rightClr18:Z,rightClr19:_,rightClr20:rr,rightClr21:tr,rightClr22:lr,rightClr23:er,rightClr24:ar,rightClr25:Cr,rightClr26:ir,rightClr27:nr,rightClr28:hr,rightClr29:gr,rightClr30:fr,rightClr31:sr,rightClr32:cr}=t,or=[e,a,C,i,n,h,g,f,s,c,o,m,u,p,d,v,E,y,b,w,N,x,$,B,O,k,S,j,P,I,R,L],mr=[M,V,Y,A,F,H,T,W,q,z,D,G,J,K,Q,U,X,Z,_,rr,tr,lr,er,ar,Cr,ir,nr,hr,gr,fr,sr,cr],ur={};for(let t=0;t<32;t++)ur[`--clr-left-${(t+1).toString()}`]=or[t%r],ur[`--clr-right-${(t+1).toString()}`]=mr[t%l];return ur}),[t]);return e.useEffect((()=>{(r=>{let t={};try{if(location.hash.length>1){const[r,l,e,a,C]=location.hash.slice(1).split("/"),i=Number(l),n=Number(e);t={rows:Number(r),left:i,right:n,leftBase:s(a,i),rightBase:s(C,n),pattern:[[],[]]}}}catch(r){}finally{r({type:m,payload:{...y,...t}})}})(l),l({type:m})}),[]),e.createElement(b.Provider,{value:{...t,styleVariables:C,dispatch:l}},r)},x=()=>{const{dispatch:r,...t}=e.useContext(w),{rows:l,left:a,right:C,leftBase:i,rightBase:n,pattern:h,leftClr1:f,leftClr2:m,leftClr3:u,leftClr4:d,leftClr5:v,leftClr6:E,leftClr7:b,leftClr8:N,leftClr9:x,leftClr10:$,leftClr11:B,leftClr12:O,leftClr13:k,leftClr14:S,leftClr15:j,leftClr16:P,leftClr17:I,leftClr18:R,leftClr19:L,leftClr20:M,leftClr21:V,leftClr22:Y,leftClr23:A,leftClr24:F,leftClr25:H,leftClr26:T,leftClr27:W,leftClr28:q,leftClr29:z,leftClr30:D,leftClr31:G,leftClr32:J,rightClr1:K,rightClr2:Q,rightClr3:U,rightClr4:X,rightClr5:Z,rightClr6:_,rightClr7:rr,rightClr8:tr,rightClr9:lr,rightClr10:er,rightClr11:ar,rightClr12:Cr,rightClr13:ir,rightClr14:nr,rightClr15:hr,rightClr16:gr,rightClr17:fr,rightClr18:sr,rightClr19:cr,rightClr20:or,rightClr21:mr,rightClr22:ur,rightClr23:pr,rightClr24:dr,rightClr25:vr,rightClr26:Er,rightClr27:yr,rightClr28:br,rightClr29:wr,rightClr30:Nr,rightClr31:xr,rightClr32:$r}=t,Br=e.useRef(void 0),Or=[f,m,u,d,v,E,b,N,x,$,B,O,k,S,j,P,I,R,L,M,V,Y,A,F,H,T,W,q,z,D,G,J],kr=[K,Q,U,X,Z,_,rr,tr,lr,er,ar,Cr,ir,nr,hr,gr,fr,sr,cr,or,mr,ur,pr,dr,vr,Er,yr,br,wr,Nr,xr,$r],Sr=e.useCallback(((t,l=r=>r)=>e=>{r({type:o,payload:{[t]:l(e.target.value)}})}),[r]),jr=e.useCallback((()=>{const{current:t}=Br,l=t.value.trim();if(l.length)try{const t=function(r){const[t,l,e,a,C,i,n,h]=r.split(","),f=[Number(l),Number(e)],c=i.split(";").map(((r,t)=>({[`leftClr${(t+1).toString()}`]:r}))),o=n.split(";").map(((r,t)=>({[`rightClr${(t+1).toString()}`]:r})));return{rows:t,left:f[0],right:f[1],leftBase:s(a,f[0]),rightBase:s(C,f[1]),...Object.assign({},...c),...Object.assign({},...o),pattern:h.split(";").map((r=>r.split("|").map(((r,t)=>g(r,f[t])))))}}(l);r({type:p,payload:{...y,...t}})}catch(r){console.log(r)}}),[Br.current]);return e.createElement("div",{id:"controls",className:"x1 y1 w3 h12 as-table"},e.createElement("div",{className:"row"},e.createElement("label",null,"Weave Rows"),e.createElement("input",{type:"range",max:60,min:4,value:l,step:4,onChange:Sr("rows",(r=>Number(r)))}),e.createElement("span",null,l)),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",null,"Strands on Left"),e.createElement("input",{type:"range",max:32,min:4,value:a,onChange:Sr("left",(r=>Number(r)))}),e.createElement("span",null,a),e.createElement("details",{open:!0},e.createElement("summary",null,"Left Color(s)"),Or.slice(0,a).map(((r,t)=>{const l=`leftClr${(t+1).toString()}`;return e.createElement("input",{key:t,type:"color",name:l,value:Or[t],onInput:Sr(l),onChange:Sr(l)})}))),e.createElement("label",null,"Base Pattern"),e.createElement("input",{type:"text",value:i,onChange:r=>{r.target.value.length>=1&&Sr("leftBase")(r)}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",null,"Strands on Right"),e.createElement("input",{type:"range",max:32,min:4,value:C,onChange:Sr("right",(r=>Number(r)))}),e.createElement("span",null,C),e.createElement("details",{open:!0},e.createElement("summary",null,"Right Color(s)"),kr.slice(0,C).map(((r,t)=>{const l=`rightClr${(t+1).toString()}`;return e.createElement("input",{key:t,type:"color",name:l,value:kr[t],onInput:Sr(l),onChange:Sr(l)})}))),e.createElement("label",null,"Base Pattern"),e.createElement("input",{type:"text",value:n,onChange:r=>{r.target.value.length>=1&&Sr("rightBase")(r)}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",{className:"full"},"Current Pattern"),e.createElement("textarea",{rows:5,readOnly:!0,value:c(t),onChange:()=>{}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("textarea",{rows:5,ref:Br}),e.createElement("button",{className:"full",onClick:jr},"Import Pattern")))},$=(r,t)=>{let[l,...e]=r,a=[{dir:i(l),count:1}];return e.forEach((r=>{l===r?a[a.length-1].count++:(l=r,a.push({dir:i(l),count:1}))})),t&&(a=a.reverse()),a.map((({dir:r,count:t})=>`${r}${t}`)).join(" ").replace(/1/g,"")},B=r=>t=>{const l=e.useContext(w);return e.createElement(r,{...t,...l})},O=({onClick:r=()=>{},isOver:t,x:l})=>e.createElement("div",{className:`nub strand-${(l+1).toString()} ${t?"over":"under"}`,onClick:r}),k=({className:r,track:t=[],loc:l,setOver:a})=>e.createElement("div",{className:r,"data-dir":$(t)},t.map(((r,t)=>e.createElement(O,{key:t,isOver:r,x:t,onClick:()=>a(...l,t,!r)})))),S=B((({dispatch:r,pattern:t=[]})=>t.map((([t,l],a)=>e.createElement(e.Fragment,{key:a},e.createElement(k,{className:`row-${a+1} left-hand`,loc:[a,0],track:t,setOver:(t,l,e,a)=>{r({type:u,payload:{row:t,side:l,nub:e,over:a}})}}),e.createElement(k,{className:`row-${a+1} right-hand`,loc:[a,1],track:l,setOver:(t,l,e,a)=>{r({type:u,payload:{row:t,side:l,nub:e,over:a}})}})))))),j=B((({left:r,right:t,styleVariables:l={}})=>e.createElement("div",{id:"weave",style:{...l,gridTemplateColumns:`calc((24px * ${r}) + (2px * ${r-1})) calc((24px * ${t}) + (2px * ${t-1}))`,transform:`translateY(calc(12px + (28px * 0.7071 * ${Math.max(t,r)})))`}},e.createElement(S,null)))),P=()=>e.createElement("div",{id:"sheet",className:"x4 y1 w9 h12",style:{overflowY:"auto"}},e.createElement(j,null)),I=()=>e.createElement(N,null,e.createElement(x,null),e.createElement(P,null));(r=>{const t=r.createElement("main");t.style.display="contents",r.body.appendChild(t),(0,a.H)(t).render(e.createElement(I,null))})(document)}},l={};function e(r){var a=l[r];if(void 0!==a)return a.exports;var C=l[r]={exports:{}};return t[r](C,C.exports,e),C.exports}e.m=t,r=[],e.O=(t,l,a,C)=>{if(!l){var i=1/0;for(f=0;f<r.length;f++){for(var[l,a,C]=r[f],n=!0,h=0;h<l.length;h++)(!1&C||i>=C)&&Object.keys(e.O).every((r=>e.O[r](l[h])))?l.splice(h--,1):(n=!1,C<i&&(i=C));if(n){r.splice(f--,1);var g=a();void 0!==g&&(t=g)}}return t}C=C||0;for(var f=r.length;f>0&&r[f-1][2]>C;f--)r[f]=r[f-1];r[f]=[l,a,C]},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),(()=>{var r={910:0};e.O.j=t=>0===r[t];var t=(t,l)=>{var a,C,[i,n,h]=l,g=0;if(i.some((t=>0!==r[t]))){for(a in n)e.o(n,a)&&(e.m[a]=n[a]);if(h)var f=h(e)}for(t&&t(l);g<i.length;g++)C=i[g],e.o(r,C)&&r[C]&&r[C][0](),r[C]=0;return e.O(f)},l=self.webpackChunkbraiding=self.webpackChunkbraiding||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=e.O(void 0,[96],(()=>e(885)));a=e.O(a)})();