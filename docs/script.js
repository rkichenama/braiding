(()=>{"use strict";var e,t={68:(e,t,r)=>{var l=r(540),a=r(338);const n=(e,t)=>new Array(e).fill(t),i=e=>e?"o":"u",o=(e,t)=>{let r;if((e=e.trim()).includes(" "))r=[].concat(...e.split(" ").map((e=>o(e))));else{let t=1,l=!0;try{const[r]=e.match(/\d+/)||[];t=Number(r||1),l=/^o/.test(e)}catch(e){}r=n(t,l)}if(t){for(;r.length<t;)r.push(...r);r=r.slice(0,t)}return r},C=e=>parseInt(e.map((e=>e?1:0)).join(""),2).toString(36),c=(e,t)=>parseInt(e,36).toString(2).padStart(t,"0").split("").map((e=>"0"!=e)),s=(e,t)=>C(o(e,t)),f=(e,t)=>(e=>{const t=e.map(i);t.push("f");let r=t.shift(),l=1;return t.forEach((e=>{r.slice(-1)===e?l+=1:(r+=`${l>1?l:""} ${e}`,l=1)})),r.replace(/ f/g,"")})(c(e,t));function g({rows:e,left:t,right:r,leftBase:l,rightBase:a,pattern:n,...i}){const{leftClr1:o,leftClr2:c,leftClr3:f,leftClr4:g,leftClr5:h,leftClr6:u,leftClr7:m,leftClr8:p,leftClr9:d,leftClr10:v,leftClr11:b,leftClr12:E,leftClr13:y,leftClr14:w,leftClr15:$,leftClr16:N,leftClr17:S,leftClr18:k,leftClr19:O,leftClr20:x,leftClr21:B,leftClr22:R,leftClr23:j,leftClr24:P,leftClr25:G,leftClr26:A,leftClr27:Y,leftClr28:M,leftClr29:T,leftClr30:q,leftClr31:I,leftClr32:D,rightClr1:F,rightClr2:V,rightClr3:W,rightClr4:H,rightClr5:U,rightClr6:z,rightClr7:J,rightClr8:K,rightClr9:L,rightClr10:Q,rightClr11:X,rightClr12:Z,rightClr13:_,rightClr14:ee,rightClr15:te,rightClr16:re,rightClr17:le,rightClr18:ae,rightClr19:ne,rightClr20:ie,rightClr21:oe,rightClr22:Ce,rightClr23:ce,rightClr24:se,rightClr25:fe,rightClr26:ge,rightClr27:he,rightClr28:ue,rightClr29:me,rightClr30:pe,rightClr31:de,rightClr32:ve}=i,be=[o,c,f,g,h,u,m,p,d,v,b,E,y,w,$,N,S,k,O,x,B,R,j,P,G,A,Y,M,T,q,I,D],Ee=[F,V,W,H,U,z,J,K,L,Q,X,Z,_,ee,te,re,le,ae,ne,ie,oe,Ce,ce,se,fe,ge,he,ue,me,pe,de,ve];return[e,t,r,s(l,t),s(a,r),be.slice(0,t).join(";"),Ee.slice(0,r).join(";"),n.map((e=>e.map(C).join("|"))).join(";")].join(",")}function h(e){try{const[t,r,l,a,n,i,o,C]=e.split(","),s=[Number(r),Number(l)],g=i.split(";").map(((e,t)=>({[`leftClr${(t+1).toString()}`]:e}))),h=o.split(";").map(((e,t)=>({[`rightClr${(t+1).toString()}`]:e})));return{rows:Number(t),left:s[0],right:s[1],leftBase:f(a,s[0]),rightBase:f(n,s[1]),...Object.assign({},...g),...Object.assign({},...h),pattern:C.split(";").map((e=>e.split("|").map(((e,t)=>c(e,s[t])))))}}catch(e){return{}}}const u="changeInputs",m="initPattern",p="toggleOver",d="replaceState",v="changeColors",b="doWeave",E={[d]:(e,{payload:t})=>t,[u]:(e,{payload:t})=>E[m](e,{payload:t}),[m]:(e,{payload:t})=>{if(!t)return e;const r={...e,...t,weavingRow:$.weavingRow,weavingStrand:$.weavingStrand},{left:l,right:a,rows:i,rightBase:C,leftBase:c,pattern:s}=r;if(s.length!=i){const e=function(e,t,r,l,a){const[i,C]=[o(l,t),o(a,r)];return n(e,!1).map((e=>[n(t,!0).map(((e,t)=>i[t%i.length])),n(r,!0).map(((e,t)=>C[t%C.length]))]))}(i,l,a,c,C);return{...r,pattern:e}}return r},[p]:(e,{payload:t})=>{const{row:r,side:l,nub:a,over:n}=t;return{...e,pattern:e.pattern.map(((e,t)=>e.map(((e,i)=>e.map(((e,o)=>t===r&&i===l&&o===a?n:e))))))}},[v]:(e,{payload:t})=>{const{hand:r,color:l}=t;let a=t.strands;if(/^(left|right)$/i.test(r)&&(Array.isArray(a)||/^(all|even|odd)$/i.test(a))){const t={};if(!Array.isArray(a)){const e=a;a=/^all$/i.test(e)?n(32,0).map(((e,t)=>t+1)):n(16,0).map(((t,r)=>/^even$/.test(e)?2*r+2:2*r+1))}return a.forEach((e=>{t[`${r}Clr${e}`]=l})),{...e,...t}}return e},[b]:({weavingRow:e,weavingStrand:t,...r},{payload:{move:l}})=>{const a="left"===t?"right":"left";let n="left"===a?(r.rows+e+l)%r.rows:e;return{...r,weavingRow:n,weavingStrand:a}}},y=()=>$,w=(e,t)=>{const r=E[t.type];return r?(e=>(location.hash=`#${(e=>g(e))(e)}`,e))(r(e,t)):e},$={rows:32,left:8,right:8,leftClr1:"#272823",leftClr2:"#272823",leftClr3:"#272823",leftClr4:"#272823",leftClr5:"#272823",leftClr6:"#272823",leftClr7:"#272823",leftClr8:"#272823",leftClr9:"#272823",leftClr10:"#272823",leftClr11:"#272823",leftClr12:"#272823",leftClr13:"#272823",leftClr14:"#272823",leftClr15:"#272823",leftClr16:"#272823",leftClr17:"#272823",leftClr18:"#272823",leftClr19:"#272823",leftClr20:"#272823",leftClr21:"#272823",leftClr22:"#272823",leftClr23:"#272823",leftClr24:"#272823",leftClr25:"#272823",leftClr26:"#272823",leftClr27:"#272823",leftClr28:"#272823",leftClr29:"#272823",leftClr30:"#272823",leftClr31:"#272823",leftClr32:"#272823",rightClr1:"#51208f",rightClr2:"#51208f",rightClr3:"#51208f",rightClr4:"#51208f",rightClr5:"#51208f",rightClr6:"#51208f",rightClr7:"#51208f",rightClr8:"#51208f",rightClr9:"#51208f",rightClr10:"#51208f",rightClr11:"#51208f",rightClr12:"#51208f",rightClr13:"#51208f",rightClr14:"#51208f",rightClr15:"#51208f",rightClr16:"#51208f",rightClr17:"#51208f",rightClr18:"#51208f",rightClr19:"#51208f",rightClr20:"#51208f",rightClr21:"#51208f",rightClr22:"#51208f",rightClr23:"#51208f",rightClr24:"#51208f",rightClr25:"#51208f",rightClr26:"#51208f",rightClr27:"#51208f",rightClr28:"#51208f",rightClr29:"#51208f",rightClr30:"#51208f",rightClr31:"#51208f",rightClr32:"#51208f",leftBase:"u4 o4",rightBase:"u4 o4",pattern:[[],[]],weavingStrand:"left",weavingRow:0},N=l.createContext($),S=N,k=({children:e})=>{const[t,r]=(a=$,(0,l.useReducer)(w,a,y));var a;const n=(0,l.useMemo)((()=>{const{left:e,right:r,leftClr1:l,leftClr2:a,leftClr3:n,leftClr4:i,leftClr5:o,leftClr6:C,leftClr7:c,leftClr8:s,leftClr9:f,leftClr10:g,leftClr11:h,leftClr12:u,leftClr13:m,leftClr14:p,leftClr15:d,leftClr16:v,leftClr17:b,leftClr18:E,leftClr19:y,leftClr20:w,leftClr21:$,leftClr22:N,leftClr23:S,leftClr24:k,leftClr25:O,leftClr26:x,leftClr27:B,leftClr28:R,leftClr29:j,leftClr30:P,leftClr31:G,leftClr32:A,rightClr1:Y,rightClr2:M,rightClr3:T,rightClr4:q,rightClr5:I,rightClr6:D,rightClr7:F,rightClr8:V,rightClr9:W,rightClr10:H,rightClr11:U,rightClr12:z,rightClr13:J,rightClr14:K,rightClr15:L,rightClr16:Q,rightClr17:X,rightClr18:Z,rightClr19:_,rightClr20:ee,rightClr21:te,rightClr22:re,rightClr23:le,rightClr24:ae,rightClr25:ne,rightClr26:ie,rightClr27:oe,rightClr28:Ce,rightClr29:ce,rightClr30:se,rightClr31:fe,rightClr32:ge}=t,he=[l,a,n,i,o,C,c,s,f,g,h,u,m,p,d,v,b,E,y,w,$,N,S,k,O,x,B,R,j,P,G,A],ue=[Y,M,T,q,I,D,F,V,W,H,U,z,J,K,L,Q,X,Z,_,ee,te,re,le,ae,ne,ie,oe,Ce,ce,se,fe,ge],me={};for(let t=0;t<32;t++)me[`--clr-left-${(t+1).toString()}`]=he[t%e],me[`--clr-right-${(t+1).toString()}`]=ue[t%r];return me}),[t]);return l.useEffect((()=>{(e=>{var t;e({type:m,payload:{...$,...(t=location.hash,h(t.replace(/^#/,"")))}})})(r),r({type:m})}),[]),l.createElement(N.Provider,{value:{...t,styleVariables:n,dispatch:r}},e)},O={Reds:{burgundy:"#523334",deepRed:"#9a1722",imperialRed:"#cc2a3a",scarlett:"#d93d3d",fuchsia:"#e25677",hotPink:"#f6579f",rosePink:"#e2bbc3"},Oranges:{burntOrange:"#cf6f40",solarOrange:"#dd8b47",safetyOrange:"#ee5806",neonOrange:"#fe9b50"},Yellows:{gold:"#89703c",goldenrod:"#e37f2a",amberGold:"#cf9f64",mustardYellow:"#a6401b",marigold:"#e7a34c",airForce:"#f3b735",canaryYellow:"#b9a447",neonYellow:"#eff123"},Greens:{darkOliveDrab:"#5a583a",oliveDrab:"#727644",emeraldGreen:"#465b48",hunterGreen:"#46864a",kellyGreen:"#6fb26e",neonGreen:"#a4de54",teal:"#0a2e2d"},Blues:{turquoise:"#349bae",navyBlue:"#222f5a",electricBlue:"#1525b2",slateBlue:"#566373",royalBlue:"#1f4b9a",seaBlue:"#4f88cb",colonialBlue:"#0e69b5",lightBlue:"#4c87cb",neonTurquoise:"#0a88ab",seafoam:"#0b9e9d",caribean:"#0d7d99"},Purples:{acidPurple:"#51208f",purple:"#8462af",lilac:"#cabbd2",lavender:"#9da0ce"},Grays:{black:"#272823",charcoalGrey:"#666a60",silverGray:"#a9a999",white:"#e6e4da"},Earths:{goldenNugget:"#bcb46d",desertSand:"#c7ba96",desertTan:"#c4af7b",khaki:"#b2a475",coytoeBrown:"#857645",chocolateBrown:"#7b6b43",rust:"#9e6035",walnutBrown:"#7d522c"}},x=({type:e,name:t,onChange:r,value:a="",hideName:n=!1})=>{const i=(0,l.useRef)(),[o,C]=(0,l.useState)(),[c,s]=(0,l.useState)(a);return(0,l.useEffect)((()=>{if(i.current){const e=`--color-${(new Date).getTime().toString(36)}-${Math.floor(4e3*Math.random())}`;i.current.querySelector("span").setAttribute("style",`anchor-name: ${e}`);const t=i.current.querySelector("dialog");t.setAttribute("popover","auto"),t.setAttribute("style",`position-anchor: ${e}`),i.current.appendChild(t),C(t)}}),[]),(0,l.useEffect)((()=>{s(a)}),[a]),l.createElement("section",{ref:i,type:e,name:t,className:"color-select",style:{"--selectedColor":c}},l.createElement("span",{onClick:()=>{o?.togglePopover()}}),!n&&l.createElement("div",null,c||"<none>"),l.createElement("dialog",null,l.createElement("select",{value:c,onChange:e=>{const t=e.target.value;r?.({target:{value:t}}),s(t)}},l.createElement("option",{value:""}),Object.entries(O).map((([e,t])=>l.createElement("optgroup",{key:e,label:e},Object.entries(t).map((([e,t])=>l.createElement("option",{key:e,value:t},e))))))),l.createElement("div",null,l.createElement("input",{type:"color",value:c,onChange:e=>{const t=e.target.value;r?.({target:{value:t}}),s(t)}}),c)))};function B(e){return n(16,0).map(((t,r)=>{const l=r+1;return l+e*Math.floor((l-1)/e)})).join(",")}const R=({hand:e,strands:t,colors:r,base:a,onStrandsChange:n,onPatternChange:i,onColorChange:o})=>{const[C,c]=(0,l.useState)("all"),s=`${e[0].toUpperCase()}${e.slice(1)}`;return l.createElement("div",{className:"row"},l.createElement("label",null,"Strands on ",s),l.createElement("input",{type:"range",max:32,min:2,value:t,onChange:n}),l.createElement("span",null,t),l.createElement("details",{open:!0},l.createElement("summary",null,s," Color(s)"),l.createElement("nav",null,"Set",l.createElement("select",{value:C,onChange:e=>{c(e.target.value)}},l.createElement("option",null,"all"),l.createElement("option",null,"even"),l.createElement("option",null,"odd"),l.createElement("option",{value:B(2)},"2 band"),l.createElement("option",{value:B(3)},"3 band"),l.createElement("option",{value:B(4)},"4 band"),l.createElement("option",{value:B(5)},"5 band"),l.createElement("option",{value:B(6)},"6 band")),"to",l.createElement(x,{type:"color",value:r[0],onChange:t=>{o(e,t.target.value,/,/.test(C)?C.replace(/ /g,"").split(","):C)}})),l.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(2rem, 1fr))"}},r.slice(0,t).map(((t,a)=>{const n=`${e}Clr${(a+1).toString()}`;return l.createElement(x,{key:a,type:"color",name:n,value:r[a],hideName:!0,onChange:t=>o(e,t.target.value,[a+1])})})))),l.createElement("label",null,"Base Pattern"),l.createElement("input",{type:"text",value:a,onChange:i}))},j=()=>{const{dispatch:e,...t}=l.useContext(S),{rows:r,left:a,right:n,leftBase:i,rightBase:o,pattern:C,leftClr1:c,leftClr2:s,leftClr3:f,leftClr4:m,leftClr5:p,leftClr6:E,leftClr7:y,leftClr8:w,leftClr9:N,leftClr10:k,leftClr11:O,leftClr12:x,leftClr13:B,leftClr14:j,leftClr15:P,leftClr16:G,leftClr17:A,leftClr18:Y,leftClr19:M,leftClr20:T,leftClr21:q,leftClr22:I,leftClr23:D,leftClr24:F,leftClr25:V,leftClr26:W,leftClr27:H,leftClr28:U,leftClr29:z,leftClr30:J,leftClr31:K,leftClr32:L,rightClr1:Q,rightClr2:X,rightClr3:Z,rightClr4:_,rightClr5:ee,rightClr6:te,rightClr7:re,rightClr8:le,rightClr9:ae,rightClr10:ne,rightClr11:ie,rightClr12:oe,rightClr13:Ce,rightClr14:ce,rightClr15:se,rightClr16:fe,rightClr17:ge,rightClr18:he,rightClr19:ue,rightClr20:me,rightClr21:pe,rightClr22:de,rightClr23:ve,rightClr24:be,rightClr25:Ee,rightClr26:ye,rightClr27:we,rightClr28:$e,rightClr29:Ne,rightClr30:Se,rightClr31:ke,rightClr32:Oe,weavingRow:xe,weavingStrand:Be}=t,Re=l.useRef(void 0),je=[c,s,f,m,p,E,y,w,N,k,O,x,B,j,P,G,A,Y,M,T,q,I,D,F,V,W,H,U,z,J,K,L],Pe=[Q,X,Z,_,ee,te,re,le,ae,ne,ie,oe,Ce,ce,se,fe,ge,he,ue,me,pe,de,ve,be,Ee,ye,we,$e,Ne,Se,ke,Oe],Ge=l.useCallback(((t,r=e=>e)=>l=>{e({type:u,payload:{[t]:r(l.target.value)}})}),[e]),Ae=l.useCallback((()=>{const{current:t}=Re,r=t.value.trim();if(r.length)try{const t=h(r);e({type:d,payload:{...$,...t}})}catch(e){console.log(e)}}),[Re.current]);return l.createElement("div",{id:"controls",className:"x1 y1 w3 h12 as-table"},l.createElement("div",{className:"row"},l.createElement("label",null,"Weave Rows"),l.createElement("input",{type:"range",max:60,min:4,value:r,step:4,onChange:Ge("rows",(e=>Number(e)))}),l.createElement("span",null,r)),l.createElement("hr",{className:"w12"}),l.createElement(R,{base:i,colors:je,hand:"left",strands:a,onStrandsChange:Ge("left",(e=>Number(e))),onPatternChange:e=>{e.target.value.length>=1&&Ge("leftBase")(e)},onColorChange:(t,r,l)=>{e({type:v,payload:{hand:t,color:r,strands:l}})}}),l.createElement("hr",{className:"w12"}),l.createElement(R,{base:o,colors:Pe,hand:"right",strands:n,onStrandsChange:Ge("right",(e=>Number(e))),onPatternChange:e=>{e.target.value.length>=1&&Ge("rightBase")(e)},onColorChange:(t,r,l)=>{e({type:v,payload:{hand:t,color:r,strands:l}})}}),l.createElement("hr",{className:"w12"}),l.createElement("div",{className:"row"},l.createElement("label",{className:"full"},"Row Count"),l.createElement("button",{style:{gridColumn:"span 4"},onClick:()=>{e({type:b,payload:{move:-1}})},disabled:0===xe},"Prev"),l.createElement("button",{style:{gridColumn:"span 4"},onClick:()=>{e({type:b,payload:{move:1}})}},"Next"),l.createElement("div",{className:"w12"},l.createElement("ul",null,l.createElement("li",null,l.createElement("b",null,"Side:")," ",Be),l.createElement("li",null,l.createElement("b",null,"Row:")," ",xe+1)))),l.createElement("hr",{className:"w12"}),l.createElement("div",{className:"row"},l.createElement("label",{className:"full"},"Current Pattern"),l.createElement("textarea",{rows:5,readOnly:!0,value:g(t),onChange:()=>{}})),l.createElement("hr",{className:"w12"}),l.createElement("div",{className:"row"},l.createElement("textarea",{rows:5,ref:Re}),l.createElement("button",{className:"full",onClick:Ae},"Import Pattern")))},P=(e,t)=>{let[r,...l]=e,a=[{dir:i(r),count:1}];return l.forEach((e=>{r===e?a[a.length-1].count++:(r=e,a.push({dir:i(r),count:1}))})),t&&(a=a.reverse()),a.map((({dir:e,count:t})=>`${e}${t}`)).join(" ").replace(/1/g,"")},G=e=>t=>{const r=l.useContext(S);return l.createElement(e,{...t,...r})},A=({onClick:e=()=>{},isOver:t,x:r})=>l.createElement("div",{className:`nub strand-${(r+1).toString()} ${t?"over":"under"}`,onClick:e}),Y=({className:e,track:t=[],loc:r,setOver:a})=>l.createElement("div",{className:e,"data-dir":P(t)},t.map(((e,t)=>l.createElement(A,{key:t,isOver:e,x:t,onClick:()=>a(...r,t,!e)})))),M=G((({dispatch:e,weavingRow:t,weavingStrand:r,pattern:a=[]})=>a.map((([a,n],i)=>l.createElement(l.Fragment,{key:i},l.createElement(Y,{className:`row-${i+1} left-hand${"right"===r&&i===t?" current":""}`,loc:[i,0],track:a,setOver:(t,r,l,a)=>{e({type:p,payload:{row:t,side:r,nub:l,over:a}})}}),l.createElement(Y,{className:`row-${i+1} right-hand${"left"===r&&i===t?" current":""}`,loc:[i,1],track:n,setOver:(t,r,l,a)=>{e({type:p,payload:{row:t,side:r,nub:l,over:a}})}})))))),T=G((({left:e,right:t,styleVariables:r={}})=>l.createElement("div",{id:"weave",style:{...r,gridTemplateColumns:`calc((24px * ${e}) + (2px * ${e-1})) calc((24px * ${t}) + (2px * ${t-1}))`,transform:`translateY(calc(12px + (28px * 0.7071 * ${Math.max(t,e)})))`}},l.createElement(M,null)))),q=()=>l.createElement("div",{id:"sheet",className:"x4 y1 w9 h12",style:{overflowY:"auto"}},l.createElement(T,null)),I=()=>l.createElement(k,null,l.createElement(j,null),l.createElement(q,null));(e=>{const t=e.createElement("main");t.style.display="contents",e.body.appendChild(t),(0,a.H)(t).render(l.createElement(I,null))})(document)}},r={};function l(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.m=t,e=[],l.O=(t,r,a,n)=>{if(!r){var i=1/0;for(s=0;s<e.length;s++){for(var[r,a,n]=e[s],o=!0,C=0;C<r.length;C++)(!1&n||i>=n)&&Object.keys(l.O).every((e=>l.O[e](r[C])))?r.splice(C--,1):(o=!1,n<i&&(i=n));if(o){e.splice(s--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[r,a,n]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={910:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[i,o,C]=r,c=0;if(i.some((t=>0!==e[t]))){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(C)var s=C(l)}for(t&&t(r);c<i.length;c++)n=i[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(s)},r=self.webpackChunkbraiding=self.webpackChunkbraiding||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=l.O(void 0,[96],(()=>l(68)));a=l.O(a)})();