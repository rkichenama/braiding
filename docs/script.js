(()=>{"use strict";var r,t={885:(r,t,l)=>{var e=l(540),C=l(338);const a=(r,t)=>new Array(r).fill(t),i=r=>r?"o":"u",n=r=>{if((r=r.trim()).includes(" "))return[].concat(...r.split(" ").map(n));let t=1,l=!0;try{const[e]=r.match(/\d+/)||[];t=Number(e||1),l=/^o/.test(r)}catch(r){}return a(t,l)};function h({rows:r,left:t,right:l,leftBase:e,rightBase:C,...a}){const{leftClr1:i,leftClr2:n,leftClr3:h,leftClr4:g,leftClr5:f,leftClr6:s,leftClr7:c,leftClr8:m,leftClr9:u,leftClr10:p,leftClr11:d,leftClr12:v,leftClr13:E,leftClr14:y,leftClr15:b,leftClr16:w,leftClr17:N,leftClr18:x,leftClr19:$,leftClr20:O,leftClr21:k,leftClr22:j,leftClr23:B,leftClr24:S,leftClr25:I,leftClr26:P,leftClr27:R,leftClr28:L,leftClr29:M,leftClr30:V,leftClr31:Y,leftClr32:A,rightClr1:F,rightClr2:H,rightClr3:T,rightClr4:W,rightClr5:q,rightClr6:z,rightClr7:D,rightClr8:G,rightClr9:J,rightClr10:K,rightClr11:Q,rightClr12:U,rightClr13:X,rightClr14:Z,rightClr15:_,rightClr16:rr,rightClr17:tr,rightClr18:lr,rightClr19:er,rightClr20:Cr,rightClr21:ar,rightClr22:ir,rightClr23:nr,rightClr24:hr,rightClr25:gr,rightClr26:fr,rightClr27:sr,rightClr28:cr,rightClr29:or,rightClr30:mr,rightClr31:ur,rightClr32:pr}=a,dr=[F,H,T,W,q,z,D,G,J,K,Q,U,X,Z,_,rr,tr,lr,er,Cr,ar,ir,nr,hr,gr,fr,sr,cr,or,mr,ur,pr];return[r,t,l,[i,n,h,g,f,s,c,m,u,p,d,v,E,y,b,w,N,x,$,O,k,j,B,S,I,P,R,L,M,V,Y,A].slice(0,t).join(";"),dr.slice(0,l).join(";"),o(r,t,l,e,C).map((r=>r.map((r=>parseInt(r.map((r=>r?1:0)).join(""),2).toString(36))).join("|"))).join(";")].join(",")}const g="changeInputs",f="initPattern",s="toggleOver",c="replaceState";function o(r,t,l,e,C){const[i,h]=[e,C].map((r=>n(r)));return a(r,!1).map((r=>[a(t,!0).map(((r,t)=>i[t%i.length])),a(l,!0).map(((r,t)=>h[t%h.length]))]))}const m={[c]:(r,{payload:t})=>t,[g]:(r,{payload:t})=>{const l={...r,...t};return m[f](l)},[f]:(r,{payload:t}={payload:{}})=>{const l={...r,...t},{left:e,right:C,rows:a,rightBase:i,leftBase:n}=l,h=o(a,e,C,n,i);return{...l,pattern:h}},[s]:(r,{payload:t})=>{const{row:l,side:e,nub:C,over:a}=t;return{...r,pattern:r.pattern.map(((r,t)=>r.map(((r,i)=>r.map(((r,n)=>t===l&&i===e&&n===C?a:r))))))}}},u=()=>d,p=(r,t)=>{const l=m[t.type];return l?(r=>{const{rows:t,leftBase:l,rightBase:e,left:C,right:a}=r;return location.hash=`#${t}/${C}/${a}/${n(l).map((r=>Number(r))).join("")}/${n(e).map((r=>Number(r))).join("")}`,r})(l(r,t)):r},d={rows:32,left:8,right:8,leftClr1:"#333333",leftClr2:"#333333",leftClr3:"#333333",leftClr4:"#333333",leftClr5:"#333333",leftClr6:"#333333",leftClr7:"#333333",leftClr8:"#333333",leftClr9:"#333333",leftClr10:"#333333",leftClr11:"#333333",leftClr12:"#333333",leftClr13:"#333333",leftClr14:"#333333",leftClr15:"#333333",leftClr16:"#333333",leftClr17:"#333333",leftClr18:"#333333",leftClr19:"#333333",leftClr20:"#333333",leftClr21:"#333333",leftClr22:"#333333",leftClr23:"#333333",leftClr24:"#333333",leftClr25:"#333333",leftClr26:"#333333",leftClr27:"#333333",leftClr28:"#333333",leftClr29:"#333333",leftClr30:"#333333",leftClr31:"#333333",leftClr32:"#333333",rightClr1:"#6900d1",rightClr2:"#6900d1",rightClr3:"#6900d1",rightClr4:"#6900d1",rightClr5:"#6900d1",rightClr6:"#6900d1",rightClr7:"#6900d1",rightClr8:"#6900d1",rightClr9:"#6900d1",rightClr10:"#6900d1",rightClr11:"#6900d1",rightClr12:"#6900d1",rightClr13:"#6900d1",rightClr14:"#6900d1",rightClr15:"#6900d1",rightClr16:"#6900d1",rightClr17:"#6900d1",rightClr18:"#6900d1",rightClr19:"#6900d1",rightClr20:"#6900d1",rightClr21:"#6900d1",rightClr22:"#6900d1",rightClr23:"#6900d1",rightClr24:"#6900d1",rightClr25:"#6900d1",rightClr26:"#6900d1",rightClr27:"#6900d1",rightClr28:"#6900d1",rightClr29:"#6900d1",rightClr30:"#6900d1",rightClr31:"#6900d1",rightClr32:"#6900d1",leftBase:"u8",rightBase:"u8",pattern:[[],[]]},v=e.createContext(d),E=v,y=({children:r})=>{const[t,l]=(C=d,(0,e.useReducer)(p,C,u));var C;const a=(0,e.useMemo)((()=>{const{left:r,right:l,leftClr1:e,leftClr2:C,leftClr3:a,leftClr4:i,leftClr5:n,leftClr6:h,leftClr7:g,leftClr8:f,leftClr9:s,leftClr10:c,leftClr11:o,leftClr12:m,leftClr13:u,leftClr14:p,leftClr15:d,leftClr16:v,leftClr17:E,leftClr18:y,leftClr19:b,leftClr20:w,leftClr21:N,leftClr22:x,leftClr23:$,leftClr24:O,leftClr25:k,leftClr26:j,leftClr27:B,leftClr28:S,leftClr29:I,leftClr30:P,leftClr31:R,leftClr32:L,rightClr1:M,rightClr2:V,rightClr3:Y,rightClr4:A,rightClr5:F,rightClr6:H,rightClr7:T,rightClr8:W,rightClr9:q,rightClr10:z,rightClr11:D,rightClr12:G,rightClr13:J,rightClr14:K,rightClr15:Q,rightClr16:U,rightClr17:X,rightClr18:Z,rightClr19:_,rightClr20:rr,rightClr21:tr,rightClr22:lr,rightClr23:er,rightClr24:Cr,rightClr25:ar,rightClr26:ir,rightClr27:nr,rightClr28:hr,rightClr29:gr,rightClr30:fr,rightClr31:sr,rightClr32:cr}=t,or=[e,C,a,i,n,h,g,f,s,c,o,m,u,p,d,v,E,y,b,w,N,x,$,O,k,j,B,S,I,P,R,L],mr=[M,V,Y,A,F,H,T,W,q,z,D,G,J,K,Q,U,X,Z,_,rr,tr,lr,er,Cr,ar,ir,nr,hr,gr,fr,sr,cr],ur={};for(let t=0;t<32;t++)ur[`--clr-left-${(t+1).toString()}`]=or[t%r],ur[`--clr-right-${(t+1).toString()}`]=mr[t%l];return ur}),[t]);return e.useEffect((()=>{l({type:f})}),[]),e.createElement(v.Provider,{value:{...t,styleVariables:a,dispatch:l}},r)},b=()=>{const{dispatch:r,...t}=e.useContext(E),{rows:l,left:C,right:a,leftBase:i,rightBase:n,pattern:f,leftClr1:s,leftClr2:o,leftClr3:m,leftClr4:u,leftClr5:p,leftClr6:v,leftClr7:y,leftClr8:b,leftClr9:w,leftClr10:N,leftClr11:x,leftClr12:$,leftClr13:O,leftClr14:k,leftClr15:j,leftClr16:B,leftClr17:S,leftClr18:I,leftClr19:P,leftClr20:R,leftClr21:L,leftClr22:M,leftClr23:V,leftClr24:Y,leftClr25:A,leftClr26:F,leftClr27:H,leftClr28:T,leftClr29:W,leftClr30:q,leftClr31:z,leftClr32:D,rightClr1:G,rightClr2:J,rightClr3:K,rightClr4:Q,rightClr5:U,rightClr6:X,rightClr7:Z,rightClr8:_,rightClr9:rr,rightClr10:tr,rightClr11:lr,rightClr12:er,rightClr13:Cr,rightClr14:ar,rightClr15:ir,rightClr16:nr,rightClr17:hr,rightClr18:gr,rightClr19:fr,rightClr20:sr,rightClr21:cr,rightClr22:or,rightClr23:mr,rightClr24:ur,rightClr25:pr,rightClr26:dr,rightClr27:vr,rightClr28:Er,rightClr29:yr,rightClr30:br,rightClr31:wr,rightClr32:Nr}=t,xr=e.useRef(void 0),$r=[s,o,m,u,p,v,y,b,w,N,x,$,O,k,j,B,S,I,P,R,L,M,V,Y,A,F,H,T,W,q,z,D],Or=[G,J,K,Q,U,X,Z,_,rr,tr,lr,er,Cr,ar,ir,nr,hr,gr,fr,sr,cr,or,mr,ur,pr,dr,vr,Er,yr,br,wr,Nr],kr=e.useCallback(((t,l=r=>r)=>e=>{r({type:g,payload:{[t]:l(e.target.value)}})}),[r]),jr=e.useCallback((()=>{const{current:t}=xr,l=t.value.trim();if(l.length)try{const t=function(r){const[t,l,e,C,a,i]=r.split(","),n=[Number(l),Number(e)],h=C.split(";").map(((r,t)=>({[`leftClr${(t+1).toString()}`]:r}))),g=a.split(";").map(((r,t)=>({[`rightClr${(t+1).toString()}`]:r})));return{rows:t,left:l,right:e,...Object.assign({},...h),...Object.assign({},...g),pattern:i.split(";").map((r=>r.split("|").map(((r,t)=>parseInt(r,36).toString(2).padStart(n[t],"0").split("").map((r=>!!parseInt(r,2)))))))}}(l);r({type:c,payload:{...d,...t}})}catch(r){console.log(r)}}),[xr.current]);return e.createElement("div",{id:"controls",className:"x1 y1 w3 h12 as-table"},e.createElement("div",{className:"row"},e.createElement("label",null,"Weave Rows"),e.createElement("input",{type:"range",max:60,min:4,value:l,step:4,onChange:kr("rows",(r=>Number(r)))}),e.createElement("span",null,l)),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",null,"Strands on Left"),e.createElement("input",{type:"range",max:32,min:4,value:C,onChange:kr("left",(r=>Number(r)))}),e.createElement("span",null,C),e.createElement("details",{open:!0},e.createElement("summary",null,"Left Color(s)"),$r.slice(0,C).map(((r,t)=>{const l=`leftClr${(t+1).toString()}`;return e.createElement("input",{key:t,type:"color",name:l,value:$r[t],onInput:kr(l),onChange:kr(l)})}))),e.createElement("label",null,"Base Pattern"),e.createElement("input",{type:"text",value:i,onChange:r=>{r.target.value.length>=1&&kr("leftBase")(r)}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",null,"Strands on Right"),e.createElement("input",{type:"range",max:32,min:4,value:a,onChange:kr("right",(r=>Number(r)))}),e.createElement("span",null,a),e.createElement("details",{open:!0},e.createElement("summary",null,"Right Color(s)"),Or.slice(0,a).map(((r,t)=>{const l=`rightClr${(t+1).toString()}`;return e.createElement("input",{key:t,type:"color",name:l,value:Or[t],onInput:kr(l),onChange:kr(l)})}))),e.createElement("label",null,"Base Pattern"),e.createElement("input",{type:"text",value:n,onChange:r=>{r.target.value.length>=1&&kr("rightBase")(r)}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("label",{className:"full"},"Current Pattern"),e.createElement("textarea",{rows:5,readOnly:!0,value:h(t),onChange:()=>{}})),e.createElement("hr",{className:"w12"}),e.createElement("div",{className:"row"},e.createElement("textarea",{rows:5,ref:xr}),e.createElement("button",{className:"full",onClick:jr},"Import Pattern")))},w=(r,t)=>{let[l,...e]=r,C=[{dir:i(l),count:1}];return e.forEach((r=>{l===r?C[C.length-1].count++:(l=r,C.push({dir:i(l),count:1}))})),t&&(C=C.reverse()),C.map((({dir:r,count:t})=>`${r}${t}`)).join(" ").replace(/1/g,"")},N=r=>t=>{const l=e.useContext(E);return e.createElement(r,{...t,...l})},x=({onClick:r=()=>{},isOver:t,x:l})=>e.createElement("div",{className:`nub strand-${(l+1).toString()} ${t?"over":"under"}`,onClick:r}),$=({className:r,track:t=[],loc:l,setOver:C})=>e.createElement("div",{className:r,"data-dir":w(t)},t.map(((r,t)=>e.createElement(x,{key:t,isOver:r,x:t,onClick:()=>C(...l,t,!r)})))),O=N((({dispatch:r,pattern:t=[]})=>t.map((([t,l],C)=>e.createElement(e.Fragment,{key:C},e.createElement($,{className:`row-${C+1} left-hand`,loc:[C,0],track:t,setOver:(t,l,e,C)=>{r({type:s,payload:{row:t,side:l,nub:e,over:C}})}}),e.createElement($,{className:`row-${C+1} right-hand`,loc:[C,1],track:l,setOver:(t,l,e,C)=>{r({type:s,payload:{row:t,side:l,nub:e,over:C}})}})))))),k=N((({left:r,right:t,styleVariables:l={}})=>e.createElement("div",{id:"weave",style:{...l,gridTemplateColumns:`calc((24px * ${r}) + (2px * ${r-1})) calc((24px * ${t}) + (2px * ${t-1}))`,transform:`translateY(calc(12px + (28px * 0.7071 * ${Math.max(t,r)})))`}},e.createElement(O,null)))),j=()=>e.createElement("div",{id:"sheet",className:"x4 y1 w9 h12",style:{overflowY:"auto"}},e.createElement(k,null)),B=()=>e.createElement(y,null,e.createElement(b,null),e.createElement(j,null));(r=>{const t=r.createElement("main");t.style.display="contents",r.body.appendChild(t),(0,C.H)(t).render(e.createElement(B,null))})(document)}},l={};function e(r){var C=l[r];if(void 0!==C)return C.exports;var a=l[r]={exports:{}};return t[r](a,a.exports,e),a.exports}e.m=t,r=[],e.O=(t,l,C,a)=>{if(!l){var i=1/0;for(f=0;f<r.length;f++){for(var[l,C,a]=r[f],n=!0,h=0;h<l.length;h++)(!1&a||i>=a)&&Object.keys(e.O).every((r=>e.O[r](l[h])))?l.splice(h--,1):(n=!1,a<i&&(i=a));if(n){r.splice(f--,1);var g=C();void 0!==g&&(t=g)}}return t}a=a||0;for(var f=r.length;f>0&&r[f-1][2]>a;f--)r[f]=r[f-1];r[f]=[l,C,a]},e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),(()=>{var r={910:0};e.O.j=t=>0===r[t];var t=(t,l)=>{var C,a,[i,n,h]=l,g=0;if(i.some((t=>0!==r[t]))){for(C in n)e.o(n,C)&&(e.m[C]=n[C]);if(h)var f=h(e)}for(t&&t(l);g<i.length;g++)a=i[g],e.o(r,a)&&r[a]&&r[a][0](),r[a]=0;return e.O(f)},l=self.webpackChunkbraiding=self.webpackChunkbraiding||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var C=e.O(void 0,[96],(()=>e(885)));C=e.O(C)})();